<customer-navbar></customer-navbar>
<h1>Appointments</h1>

<!-- Customer Landing -->
<div *ngIf="profile.type===1">
  <button [routerLink]="['/home']">Find Stylist</button>

  <h2>Confirmed</h2>
  <div
    *ngFor="let confirmedBooking of profile.confirmedBookings; let i = index"
    class="booking-confirmed"
  >
    <booking
      [name]="confirmedBooking.name"
      [image_url]="confirmedBooking.image_url"
      [time]="confirmedBooking.time"
      [phoneNumber]="confirmedBooking.phonenumber"
      [location]="confirmedBooking.location"
    >
    </booking>
  </div>

  <h2>Awaiting Payment</h2>
  <div *ngFor="let dueBooking of profile.dueBookings; let i = index">
    <booking
      [name]="dueBooking.name"
      [image_url]="dueBooking.image_url"
      [time]="dueBooking.time"
      [phoneNumber]="dueBooking.phonenumber"
      [location]="dueBooking.location"
    >
    </booking>
    <payment-input
      (handleProcessedPayment)="payBooking(dueBooking.id, i)"
      [stylistName]="dueBooking.name"
    >
    </payment-input>
  </div>

  <h2>Pending</h2>
  <div
    *ngFor="let pendingBooking of profile.pendingBookings; let i = index"
    class="booking-confirmed"
  >
    <booking
      [name]="pendingBooking.name"
      [image_url]="pendingBooking.image_url"
      [time]="pendingBooking.time"
      [phoneNumber]="pendingBooking.phonenumber"
      [location]="pendingBooking.location"
    >
    </booking>
    <button (click)="deleteBooking(pendingBooking.id, i)">Reject</button>
  </div>
</div>

<!-- Stylist Landing -->
<div *ngIf="profile.type===0">
  <button [routerLink]="['/stylisthome']">View Map</button>

  <h2>Confirmed</h2>
  <div
    *ngFor="let confirmedBooking of profile.confirmedBookings; let i = index"
    class="booking-confirmed"
  >
    <booking
      [name]="confirmedBooking.name"
      [image_url]="confirmedBooking.image_url"
      [time]="confirmedBooking.time"
      [phoneNumber]="confirmedBooking.phonenumber"
      [location]="confirmedBooking.location"
    >
    </booking>
    <button (click)="completeBooking(confirmedBooking.id, i)">Complete</button>
    <button (click)="cancelBooking(confirmedBooking.id, i)">Cancel</button>
  </div>

  <h2>Awaiting Payment</h2>
  <div *ngFor="let dueBooking of profile.dueBookings; let i = index">
    <booking
      [name]="dueBooking.name"
      [image_url]="dueBooking.image_url"
      [time]="dueBooking.time"
      [phoneNumber]="dueBooking.phonenumber"
      [location]="dueBooking.location"
    >
    </booking>
    <button (click)="requestPayment(dueBooking.id, i)">Request Payment</button>
  </div>

  <h2>Pending</h2>
  <div
    *ngFor="let pendingBooking of profile.pendingBookings; let i = index"
    class="booking-confirmed"
  >
    <booking
      [name]="pendingBooking.name"
      [image_url]="pendingBooking.image_url"
      [time]="pendingBooking.time"
      [phoneNumber]="pendingBooking.phonenumber"
      [location]="pendingBooking.location"
    >
    </booking>
    <button (click)="acceptBooking(pendingBooking.id, i)">Accept</button>
    <button (click)="declineBooking(pendingBooking.id, i)">Decline</button>
  </div>
</div>
